(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[59],{444:function(e,t,a){"use strict";a.r(t);var n=a(67),r=a.n(n),c=a(68),i=a(9),s=a(10),o=a(12),l=a(11),u=a(0),m=a.n(u),p=a(71),d=a(73),h=a(72),f=a(74),E=a(244),g=a(21),b=a(63),v=a.n(b),w=a(23),x=a(64),k=a(16),_=a(22),y=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.props&&n.props.user&&n.props.user.id&&n.props.match&&n.props.match.params&&n.props.match.params.id&&n.props.match.params.class_id)){e.next=4;break}return e.next=3,n.setState({topic_id:n.props.match.params.id,class_id:n.props.match.params.class_id});case 3:n.getTopic();case 4:case"end":return e.stop()}}),e)}))),n.createNotification=function(e,t){switch(e){case"info":x.NotificationManager.info(t,"",5e3);break;case"success":x.NotificationManager.success(t,"",5e3);break;case"warning":x.NotificationManager.warning(t,"",5e3);break;case"error":x.NotificationManager.error(t,"",5e3)}},n.submitComment=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(a=n.state.comment)||!(a.trim().length<=0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.setState({isLoading:!0});case 6:v.a.post("".concat(w.a.prod,"/api/comment/create"),{user_id:n.props.user.id,topic_id:n.state.topic_id,comment:a.trim()}).then(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({comment:""});case 2:n.getTopic();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.setState({isLoading:!1}),console.log("Error: getting data from db ",e.response),n.createNotification("error","Error while Getting data from db")}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!1,isValid:{value:!1,text:""},data:{},topic_id:"",class_id:"",comment:""},n}return Object(s.a)(a,[{key:"getTopic",value:function(){var e=this;this.setState({isLoading:!0}),v.a.get("".concat(w.a.prod,"/api/users/").concat(this.state.class_id,"/topic/").concat(this.state.topic_id,"/private")).then((function(t){var a=t.data.data;e.setState({data:a,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log("Error: getting data from db ",t.response),e.createNotification("error","Error while Getting data from db")}))}},{key:"handleTextChange",value:function(e){this.setState({comment:e.value})}},{key:"render",value:function(){var e=this;return m.a.createElement(g.a,null,this.state.isLoading&&m.a.createElement(k.a,null),m.a.createElement(p.a,null,m.a.createElement(x.NotificationContainer,null),m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(h.a.Header,null,m.a.createElement(h.a.Title,{as:"h5"},this.state.data.name?this.state.data.name:null)),m.a.createElement(h.a.Body,null,m.a.createElement(p.a,null,m.a.createElement(d.a,{md:{span:8,offset:2}},m.a.createElement(p.a,null,m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(h.a.Body,null,m.a.createElement("p",null,this.state.data.description?this.state.data.description:null))))),m.a.createElement(p.a,null,m.a.createElement(d.a,null,this.state.data.comments?this.state.data.comments.map((function(e){return m.a.createElement(p.a,{key:e.id},m.a.createElement(d.a,null,m.a.createElement(h.a,null,m.a.createElement(h.a.Header,null,m.a.createElement(h.a.Title,{as:"h6"},"".concat(e.user.first_name," ").concat(e.user.last_name))),m.a.createElement(h.a.Body,null,e.comment))))})):null)),m.a.createElement(p.a,null,m.a.createElement(d.a,null,m.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},m.a.createElement(f.a,null,m.a.createElement(f.a.Row,null,m.a.createElement(d.a,null,m.a.createElement(f.a.Group,{controlId:"exampleForm.ControlTextarea1"},m.a.createElement(f.a.Control,{as:"textarea",name:"comment",rows:4,placeholder:"Write a comment...",value:this.state.comment,className:this.state.isValid.value&&"description"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target)}})))),m.a.createElement(f.a.Row,null,m.a.createElement(d.a,null,m.a.createElement(f.a.Group,{controlId:"exampleForm.ControlTextarea1",className:"text-center"},m.a.createElement(E.a,{style:{width:"50%"},onClick:function(t){return e.submitComment(t)},variant:"outline-primary"},"Submit Now")))))))))))))))}}]),a}(m.a.Component);t.default=Object(_.b)((function(e){return{user:e.userDetails.user}}),null)(y)}}]);
//# sourceMappingURL=59.7290cd1a.chunk.js.map